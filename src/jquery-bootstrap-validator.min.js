(function(a){a.fn.validate=function(b){function d(){var f=c.post_data,b={text:$this.val(),hidden:$this.val(),checkbox:$this.is(":checked")};f[$this.attr(c.attr_name)]=b[$this.attr("type")];a.each(c.attrs,function(c,b){f[b]=a("#id_"+b).val()});return f}function e(b){a.isEmptyObject(b)?a.fn.validate.populate_error($this.attr(c.attr_name),""):a.each(b,a.fn.validate.populate_error)}var c=a.extend({},a.fn.validate.defaults,b);this.attr_name=c.attr_name;b=c.class_name?"."+c.class_name:"input";a("form").on(c.event_name,b,function(){$this=a(this);var b=d();a.ajax({url:c.post_url,type:"POST",dataType:"json",data:b,async:!0}).done(e)});return a(this)};a.fn.validate.on_success=a.noop;a.fn.validate.on_error=a.noop;a.fn.validate.defaults={class_name:"validate",event_name:"change",attr_name:"name",post_url:"/validate",post_data:{},attrs:["page_name","page_id"]};a.fn.validate.populate_error=function(b,d){var e="name"==a.fn.validate.attr_name?a("#id_"+b):a("#"+b);""===d?(console.log(e),e.parents(".control-group").addClass("success").removeClass("error").find("span.help-block").text(d),a.fn.validate.on_success()):(e.parents(".control-group").addClass("error").removeClass("success").find("span.help-block").text(d),a.fn.validate.on_error())}})(jQuery);
